{"version":3,"sources":["../../src/components/customOverlay.js"],"names":["GMCustomOverlay","elem","map","div_","map_","coords_","setMap","ex","console","error","CustomOverlay","props","displayName","maps","prototype","OverlayView","setCoords","coords","onRemove","parentNode","removeChild","onAdd","div","style","position","panes","getPanes","overlayLayer","appendChild","draw","overlayProjection","getProjection","LatLng","coordsPixels","fromLatLngToDivPixel","left","x","offsetWidth","top","y","offsetHeight","name","item","overlay","findDOMNode","onClick","event","addListener","className","ref","children","Component","propTypes","bounds","object","shape","lat","number","isRequired","lng"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,SAASA,eAAT,CAAyBC,IAAzB,EAA+BC,GAA/B,EAAoC;AAChC,OAAKC,IAAL,GAAYF,IAAZ;AACA,OAAKG,IAAL,GAAYF,GAAZ;AACA,OAAKG,OAAL,GAAe,IAAf;AACA,MAAI;AACF,SAAKC,MAAL,CAAYJ,GAAZ;AACD,GAFD,CAGA,OAAMK,EAAN,EAAU;AACRC,YAAQC,KAAR,CAAcF,EAAd;AACD;AACJ;;IAIKG,a;;;AACF,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,8HACTA,KADS;;AAEf,UAAKC,WAAL,GAAmB,eAAnB;AAFe,QAGRC,IAHQ,GAGA,MAAKF,KAHL,CAGRE,IAHQ;;AAIfb,oBAAgBc,SAAhB,GAA4B,IAAIH,MAAME,IAAN,CAAWE,WAAf,EAA5B;AACAf,oBAAgBc,SAAhB,CAA0BE,SAA1B,GAAsC,UAASC,MAAT,EAAiB;AACrD,WAAKZ,OAAL,GAAeY,MAAf;AACD,KAFD;AAGAjB,oBAAgBc,SAAhB,CAA0BI,QAA1B,GAAqC,YAAW;AAC9C,WAAKf,IAAL,CAAUgB,UAAV,CAAqBC,WAArB,CAAiC,KAAKjB,IAAtC;AACA,WAAKA,IAAL,GAAY,IAAZ;AACD,KAHD;;AAKAH,oBAAgBc,SAAhB,CAA0BO,KAA1B,GAAkC,YAAW;AAC3C,UAAIC,MAAM,KAAKnB,IAAf;AACAmB,UAAIC,KAAJ,CAAUC,QAAV,GAAqB,UAArB;AACA,WAAKrB,IAAL,GAAUmB,GAAV;AACA,UAAMG,QAAQ,KAAKC,QAAL,EAAd;AACAD,YAAME,YAAN,CAAmBC,WAAnB,CAA+B,KAAKzB,IAApC;AACD,KAND;;AAQAH,oBAAgBc,SAAhB,CAA0Be,IAA1B,GAAiC,YAAW;AAC1C,UAAMC,oBAAoB,KAAKC,aAAL,EAA1B;AACA,UAAMd,SAAS,IAAIJ,KAAKmB,MAAT,CAAgB,KAAK3B,OAArB,CAAf;AACA,UAAM4B,eAAeH,kBAAkBI,oBAAlB,CAAuCjB,MAAvC,CAArB;AACA,UAAIK,MAAM,KAAKnB,IAAf;;AAGAmB,UAAIC,KAAJ,CAAUY,IAAV,GAAqBF,aAAaG,CAAb,GAAkBd,IAAIe,WAAL,GAAkB,CAAxD;AACAf,UAAIC,KAAJ,CAAUe,GAAV,GAAmBL,aAAaM,CAAb,GAAiBjB,IAAIkB,YAAxC;;AAEA;AACD,KAXD;;AArBe;AAkClB;;;;wBACGC,I,EAAM;AAAA;;AACR,aAAO,UAACC,IAAD,EAAU;AACf,eAAKD,IAAL,IAAaC,IAAb;AACD,OAFD;AAGD;;;wCACmB;AAAA;;AAAA,mBACE,KAAK/B,KADP;AAAA,UACXE,IADW,UACXA,IADW;AAAA,UACLX,GADK,UACLA,GADK;;AAElB,UAAI;AACF,aAAKyC,OAAL,GAAe,IAAI3C,eAAJ,CAAoB,mBAAS4C,WAAT,CAAqB,KAAK,gBAAL,CAArB,CAApB,EAAkE,KAAKjC,KAAL,CAAWT,GAA7E,CAAf;AACA,aAAKyC,OAAL,CAAa3B,SAAb,CAAuB,KAAKL,KAAL,CAAWM,MAAlC;;AAEA,YAAG,OAAO,KAAKN,KAAL,CAAWkC,OAAlB,KAA8B,UAAjC,EACEhC,KAAKiC,KAAL,CAAWC,WAAX,CAAuB7C,GAAvB,EAA4B,OAA5B,EAAqC,UAAC4C,KAAD;AAAA,iBAAW,OAAKnC,KAAL,CAAWkC,OAAX,CAAmBC,KAAnB,CAAX;AAAA,SAArC;AACH,OAND,CAOA,OAAOvC,EAAP,EAAW;AACTC,gBAAQC,KAAR,CAAcF,EAAd;AACD;AACF;;;6BAEQ;AACL,aAAO;AAAA;AAAA,UAAK,WAAW,KAAKI,KAAL,CAAWqC,SAA3B,EAAsC,OAAO,KAAKrC,KAAL,CAAWY,KAAxD,EAA+D,KAAK,KAAK0B,GAAL,CAAS,gBAAT,CAApE;AAAiG,aAAKtC,KAAL,CAAWuC;AAA5G,OAAP;AACH;;;;EAzDuB,gBAAMC,S;;AA4DlCzC,cAAc0C,SAAd,GAA0B;AACxBC,UAAS,oBAAUC,MADK;AAExBzC,QAAO,oBAAUyC,MAFO;AAGxBpD,OAAM,oBAAUoD,MAHQ;AAIxBrC,UAAS,oBAAUsC,KAAV,CAAgB;AACvBC,SAAM,oBAAUC,MAAV,CAAiBC,UADA;AAEvBC,SAAM,oBAAUF,MAAV,CAAiBC;AAFA,GAAhB;AAJe,CAA1B;;kBAUehD,a","file":"customOverlay.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactDom from 'react-dom';\n\nfunction GMCustomOverlay(elem, map) {\n    this.div_ = elem;\n    this.map_ = map;\n    this.coords_ = null;\n    try {\n      this.setMap(map);\n    }\n    catch(ex) {\n      console.error(ex);\n    }\n}\n\n\n\nclass CustomOverlay extends React.Component {\n    constructor(props) {\n        super(props);\n        this.displayName = 'CustomOverlay';\n        const {maps} = this.props;\n        GMCustomOverlay.prototype = new props.maps.OverlayView();\n        GMCustomOverlay.prototype.setCoords = function(coords) {\n          this.coords_ = coords;\n        }\n        GMCustomOverlay.prototype.onRemove = function() {\n          this.div_.parentNode.removeChild(this.div_);\n          this.div_ = null;\n        }\n\n        GMCustomOverlay.prototype.onAdd = function() {\n          let div = this.div_;\n          div.style.position = \"absolute\";\n          this.div_=div;\n          const panes = this.getPanes();\n          panes.overlayLayer.appendChild(this.div_);\n        }\n\n        GMCustomOverlay.prototype.draw = function() {\n          const overlayProjection = this.getProjection();\n          const coords = new maps.LatLng(this.coords_);\n          const coordsPixels = overlayProjection.fromLatLngToDivPixel(coords)\n          let div = this.div_;\n\n\n          div.style.left = `${(coordsPixels.x - (div.offsetWidth)/2)}px`;\n          div.style.top = `${coordsPixels.y - div.offsetHeight}px`;\n\n          // debugger;\n        }\n\n    }\n    ref(name) {\n      return (item) => {\n        this[name] = item;\n      };\n    }\n    componentDidMount() {\n      const {maps, map} = this.props;\n      try {\n        this.overlay = new GMCustomOverlay(ReactDom.findDOMNode(this['custom-overlay']), this.props.map);\n        this.overlay.setCoords(this.props.coords);\n\n        if(typeof this.props.onClick === 'function')\n          maps.event.addListener(map, 'click', (event) => this.props.onClick(event));\n      }\n      catch (ex) {\n        console.error(ex)\n      }\n    }\n\n    render() {\n        return <div className={this.props.className} style={this.props.style} ref={this.ref('custom-overlay')}>{this.props.children}</div>;\n    }\n}\n\nCustomOverlay.propTypes = {\n  bounds : PropTypes.object,\n  maps : PropTypes.object,\n  map : PropTypes.object,\n  coords : PropTypes.shape({\n    lat : PropTypes.number.isRequired,\n    lng : PropTypes.number.isRequired\n  })\n}\n\nexport default CustomOverlay;\n"]}